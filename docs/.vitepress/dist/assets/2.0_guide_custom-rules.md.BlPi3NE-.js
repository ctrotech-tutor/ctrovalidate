import {
  _ as i,
  c as a,
  o as e,
  ag as n,
} from './chunks/framework.COADSRRV.js';
const c = JSON.parse(
    '{"title":"Extending Ctrovalidate","description":"","frontmatter":{},"headers":[],"relativePath":"2.0/guide/custom-rules.md","filePath":"2.0/guide/custom-rules.md"}'
  ),
  l = { name: '2.0/guide/custom-rules.md' };
function t(h, s, r, p, k, d) {
  return (
    e(),
    a('div', null, [
      ...(s[0] ||
        (s[0] = [
          n(
            `<h1 id="extending-ctrovalidate" tabindex="-1">Extending Ctrovalidate <a class="header-anchor" href="#extending-ctrovalidate" aria-label="Permalink to &quot;Extending Ctrovalidate&quot;">‚Äã</a></h1><p>While our built-in rules cover 90% of use cases, Ctrovalidate is built for custom business logic. You can extend the library with synchronous and asynchronous rules using the global <code>Ctrovalidate</code> object.</p><hr><h2 id="‚ö°-synchronous-rules" tabindex="-1">‚ö° Synchronous Rules <a class="header-anchor" href="#‚ö°-synchronous-rules" aria-label="Permalink to &quot;‚ö° Synchronous Rules&quot;">‚Äã</a></h2><p>Use <code>Ctrovalidate.addRule()</code> for checks that execute instantly (e.g., regex, range checks, or internal state matching).</p><h3 id="signature" tabindex="-1">Signature <a class="header-anchor" href="#signature" aria-label="Permalink to &quot;Signature&quot;">‚Äã</a></h3><p><code>Ctrovalidate.addRule(name, logic, defaultMessage)</code></p><ul><li><strong>name</strong>: String used in <code>data-ctrovalidate-rules</code>.</li><li><strong>logic</strong>: Function <code>(value, params, element) =&gt; boolean</code>.</li><li><strong>defaultMessage</strong>: The fallback error message.</li></ul><h3 id="real-world-example-isworkemail" tabindex="-1">Real-world Example: <code>isWorkEmail</code> <a class="header-anchor" href="#real-world-example-isworkemail" aria-label="Permalink to &quot;Real-world Example: \`isWorkEmail\`&quot;">‚Äã</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Ctrovalidate } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;ctrovalidate&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Ctrovalidate.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addRule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;isWorkEmail&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">value) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Let &#39;required&#39; handle empty checks</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> commonProviders</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;gmail.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;yahoo.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;hotmail.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> domain</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;@&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">commonProviders.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(domain);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;Please use a corporate email address (Personal domains not allowed).&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><hr><h2 id="üåê-asynchronous-rules" tabindex="-1">üåê Asynchronous Rules <a class="header-anchor" href="#üåê-asynchronous-rules" aria-label="Permalink to &quot;üåê Asynchronous Rules&quot;">‚Äã</a></h2><p>Use <code>Ctrovalidate.addAsyncRule()</code> for rules that require server-side checks or heavy computation.</p><h3 id="signature-1" tabindex="-1">Signature <a class="header-anchor" href="#signature-1" aria-label="Permalink to &quot;Signature&quot;">‚Äã</a></h3><p><code>Ctrovalidate.addAsyncRule(name, logic, defaultMessage)</code></p><ul><li><strong>logic</strong>: Async function <code>(value, params, element, signal) =&gt; Promise&lt;boolean&gt;</code>.</li><li><strong>signal</strong>: An <code>AbortSignal</code>. Use this to cancel redundant network requests.</li></ul><h3 id="real-world-example-usernameavailable" tabindex="-1">Real-world Example: <code>usernameAvailable</code> <a class="header-anchor" href="#real-world-example-usernameavailable" aria-label="Permalink to &quot;Real-world Example: \`usernameAvailable\`&quot;">‚Äã</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Ctrovalidate.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addAsyncRule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;usernameAvailable&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">element</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">signal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">value) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`/api/check-user?u=\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">value</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { signal });</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data.available;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;This username is already taken.&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><div class="tip custom-block github-alert"><p class="custom-block-title">TIP</p><p>While an async rule is running, the field receives the <code>pendingClass</code> (default: <code>is-validating</code>). Use this to show a loading spinner in your CSS.</p></div><hr><h2 id="üèóÔ∏è-best-practices" tabindex="-1">üèóÔ∏è Best Practices <a class="header-anchor" href="#üèóÔ∏è-best-practices" aria-label="Permalink to &quot;üèóÔ∏è Best Practices&quot;">‚Äã</a></h2><ol><li><strong>Rule Atomicity</strong>: Each rule should do exactly one thing. Combine <code>required|numeric|isPositive</code> rather than creating one <code>requiredPositiveNumber</code> rule.</li><li><strong>Graceful Silence</strong>: Rules should generally return <code>true</code> for empty values. This allows the <code>required</code> rule to manage mandatory state independently.</li><li><strong>Registration Timing</strong>: Always register your custom rules <strong>before</strong> initializing <code>new Ctrovalidate()</code>. This ensures the initial field discovery pass correctly maps your rules.</li></ol><h2 id="next-steps" tabindex="-1">Next Steps <a class="header-anchor" href="#next-steps" aria-label="Permalink to &quot;Next Steps&quot;">‚Äã</a></h2><ul><li><strong><a href="./../api/methods.html">API Methods Query</a></strong> ‚Äî Detailed technical reference for all instance methods.</li><li><strong><a href="./../api/types.html">TypeScript Integration</a></strong> ‚Äî Fully typed custom rules.</li></ul>`,
            24
          ),
        ])),
    ])
  );
}
const E = i(l, [['render', t]]);
export { c as __pageData, E as default };
